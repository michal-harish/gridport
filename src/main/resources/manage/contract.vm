 #include("manage/header.vm")

<header>
 <em>GridPort Server Instance</em> | $request.getRemoteHost() | $this.getCurrentUser()
 | <a href="$this.getHomeUrl()">home</a>   
 | <a href="$this.getLogsUrl()">logs</a> 
 | <form style="display:inline;" method="POST" action="$this.getRestartUrl()" onsubmit='return confirm("Reload configuration and restart the server ?");'><input type="submit" name="restart" value="RESTART"/></form>
</header>

<h2>Contract: $contract.getName() </h2>
<form>
   <p>
    <label>Rate limit:</label>
    <input name="frequency" value="$contract.getFrequency()"/> requests per <input name="interval" value="$contract.getIntervalMs()"/>(ms)
   </p>
</form>
<h2>IP Filters</h2>
<textarea>$contract.getIpRange()</textarea>
<h2>Available to Groups</h2>
 <table>
 #foreach ( $group in $contract.getGroups() )
    <tr><td>$group</td><td><form method="POST" action="$groupsUri/$group"><input type="submit" value="remove"/></form></td></tr>
 #end
 
 <form method="POST" action="$groupsUri">
    <tr><td><input name="group"/></td><td><input type="submit" value="add group"/></td></tr>
    </table>
 </form>
 
<h2>Available Endpoints</h2>
#foreach ( $endpointId in $contract.getEndpoints() )
    #if ($endpoints.get($endpointId)) 
        #set( $e =  $endpoints.get($endpointId) )
        [$e.getId()] 
        #if ($e.getGatewayHost()) $e.getGatewayHost() #end
        $e.getUriBase() &rarr; $e.getEndpoint() <br/>
    #end
#end

 #include("manage/footer.vm")
 